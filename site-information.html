<!DOCTYPE html>
<html lang="en" class="pSite-information">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <link href="css/main.css" rel="stylesheet">
</head>
<body>

<button id="confirmButton">Continuer</button>

<div id="tabs">
    <button onclick="OpenTab('informations', 0)" class="active">Information</button>
    <button onclick="OpenTab('design', 1)">Design</button>
</div>

<script>
    function OpenTab(id, tabId) {
        var pages = document.getElementById("pages");
        var tabs = document.getElementById("tabs")
        for (var i = 0; i < pages.childElementCount; i++) {
            pages.children[i].style.display = "none";
        }
        for (var i = 0; i < tabs.childElementCount; i++) {
            tabs.children[i].classList.remove("active");
        }
        document.getElementById(id).style.display = "block";
        tabs.children[tabId].classList.add("active");
    }
</script>

<div id="pages">
    <div id="informations" class="page" style="display: block;">
        <h1>Informations</h1>
        <hr>
        <p>Nom du site</p>
        <input type="text" id="nomSite">
        <p>Commentaires</p>
        <textarea id="infoEntreprise"></textarea>
        <p>Si vous désirez encore modifier une des informations présentes après cette étape notez que chaque modification vous sera facturée pour un montant de 29.99 CHF. Nous vous conseillons donc fortement tout relire avant de passer à la suite.</p>
    </div>
    <div id="design" class="page" style="display: none;">
        <h1>Design</h1>
        <hr>
        <h2>Icône du site</h2>
        <div class="addIconPart">
            <div class="iconPart">
                <div class="iconSpace"></div>
                <img src="src/Icons/TrashIcon.png"/>
            </div>
            <button class="addIconButton"><img src="../src/Icons/AddIconBlack.png">Ajouter une image</button>
        </div>
        <hr>
        <h2>Couleurs principales</h2>
        <div id="palette">
            <button onclick="addColor()" class="addColor"></button>
        </div>
        <script>
            var palette = document.getElementById("palette")
            function addColor() {
                var newColor = document.createElement("input");
                newColor.type = "color";
                newColor.value = "#ffffff";
                palette.insertBefore(newColor, palette.children[palette.childElementCount - 1]);
                if (palette.childElementCount >= 6) {
                    palette.children[palette.childElementCount - 1].style.display = "none";
                }
            }
        </script>
        <hr>
        <h2>Images</h2>

        <button>add</button>

        <div class="imageDiv">
            <div class="imageRecDiv">
                <div  class="suppImage">
                    <div class="info">
                        <label>Image restaurant dans une grande ville connue</label>
                        <button class="trashButton" id="click"><img src="src/Icons/TrashIcon.png" height="50" width="50"/></button>
                    </div>
                </div>
            </div>


        </div>
        <hr>
        <h2>Commentaires</h2>
        <textarea id="commSite"></textarea>
        <p>Si vous désirez encore modifier une des informations présentes après cette étape notez que chaque modification vous sera facturée pour un montant de 29.99 CHF. Nous vous conseillons donc fortement tout relire avant de passer à la suite.</p>
    </div>
</div>

<script type="module">

    import {initializeApp} from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
    import {getAuth, onAuthStateChanged, signOut} from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";
    import {getDatabase, set, ref, update} from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDpxXNFrji99t8a6QTcKhCmgIdA0ibs_lk",
        authDomain: "webcastle-website.firebaseapp.com",
        databaseURL: "https://webcastle-website-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "webcastle-website",
        storageBucket: "webcastle-website.appspot.com",
        messagingSenderId: "274339465548",
        appId: "1:274339465548:web:927dd550601c84dffce7e9"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const database = getDatabase(app);


    confirmButton.addEventListener('click', (e) => {

        const user = auth.currentUser;

        set(ref(database, 'users/' + user.uid + "/" + "Site/informations" ), {
            nom_site: document.getElementById('nomSite').value,
            info_entreprise: document.getElementById('infoEntreprise').value
        })

        set(ref(database, 'users/' + user.uid + "/" + "Site/design" ), {
            design_commentaire: document.getElementById('commSite').value
        })
    });

    click.addEventListener('click', (e) => {
       alert("ok")
    });

    </script>
</body>
</html>